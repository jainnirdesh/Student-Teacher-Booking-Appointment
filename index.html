<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduBook - Student-Teacher Booking System</title>
    <meta name="description" content="Streamline your academic consultations with our easy-to-use appointment booking platform">
    
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ“</text></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <h1>EduBook</h1>
            </div>
            <nav class="nav">
                <a href="#home" class="nav-link active">Home</a>
                <a href="#about" class="nav-link">About</a>
                <a href="#features" class="nav-link">Features</a>
                <a href="#contact" class="nav-link">Contact</a>
            </nav>
        </header>

        <main class="main">
            <section id="home" class="hero">
                <div class="hero-content">
                    <h2>Welcome to Student-Teacher Booking System</h2>
                    <p>Streamline your academic consultations with our easy-to-use appointment booking platform</p>
                    <div class="cta-buttons">
                        <button class="btn btn-primary" id="studentLoginBtn" data-tooltip="Access your student dashboard">
                            <i class="fas fa-user-graduate"></i>
                            Student Portal
                        </button>
                        <button class="btn btn-secondary" id="teacherLoginBtn" data-tooltip="Manage your appointments">
                            <i class="fas fa-chalkboard-teacher"></i>
                            Teacher Portal
                        </button>
                        <button class="btn btn-accent" id="adminLoginBtn" data-tooltip="System administration">
                            <i class="fas fa-user-shield"></i>
                            Admin Portal
                        </button>
                    </div>
                </div>
                <div class="hero-image">
                    <i class="fas fa-calendar-alt"></i>
                </div>
            </section>

            <section id="about" class="about">
                <div class="about-content">
                    <h2>About EduBook</h2>
                    <p>Revolutionizing academic consultations with a modern, intuitive platform that connects students and teachers seamlessly.</p>
                    
                    <div class="features-grid">
                        <div class="feature-card">
                            <i class="fas fa-calendar-check"></i>
                            <h3>Easy Scheduling</h3>
                            <p>Book appointments with your favorite teachers in just a few clicks.</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-bell"></i>
                            <h3>Smart Notifications</h3>
                            <p>Get real-time updates about your appointments and messages.</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-shield-alt"></i>
                            <h3>Secure Platform</h3>
                            <p>Your data is protected with enterprise-grade security measures.</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-mobile-alt"></i>
                            <h3>Mobile Friendly</h3>
                            <p>Access your dashboard from any device, anywhere, anytime.</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-comments"></i>
                            <h3>Instant Messaging</h3>
                            <p>Communicate directly with teachers through our messaging system.</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-chart-line"></i>
                            <h3>Analytics Dashboard</h3>
                            <p>Track your learning progress and appointment history.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Authentication Status Section -->
            <section id="authStatus" class="auth-status">
                <div class="auth-content">
                    <h3><i class="fas fa-info-circle"></i> System Status</h3>
                    <div id="authStatusDisplay" class="status-display">
                        <i class="fas fa-check-circle"></i> Production Ready - Real Firebase Integration
                    </div>
                    
                    <div class="system-info">
                        <h4><i class="fas fa-rocket"></i> Real-World Features</h4>
                        <div class="features-list">
                            <div class="feature-item">
                                <i class="fas fa-shield-alt"></i>
                                <span>Secure Firebase Authentication</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-database"></i>
                                <span>Real-time Database Integration</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-calendar-check"></i>
                                <span>Live Appointment Booking</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-envelope"></i>
                                <span>Real-time Messaging System</span>
                            </div>
                        </div>
                        <p class="system-note">
                            <strong>Ready for Production:</strong> This system is now connected to real Firebase services 
                            and ready for live deployment. Create an account to get started!
                        </p>
                    </div>
                </div>
            </section>

            <!-- Dashboard container, hidden by default -->
            <section id="dashboard" style="display:none;">
                <div id="userInfo"></div>
                <nav class="sidebar">
                    <ul>
                        <li><a href="#" id="dashboardHome" class="active">Dashboard Home</a></li>
                        <li><a href="#" id="appointmentsSection">Appointments</a></li>
                        <li><a href="#" id="messagesSection">Messages</a></li>
                        <li><a href="#" id="profileSection">Profile</a></li>
                        <li><a href="#" id="logoutBtn">Logout</a></li>
                    </ul>
                </nav>
                <div class="content-area" id="mainDashboardArea">
                    <!-- Admin Dashboard -->
                    <div id="adminDashboard" class="dashboard-content" style="display:none;">
                        <h2>Admin Dashboard</h2>
                        <div class="stats-grid">
                            <div class="stat-card"><h4>Total Teachers</h4><span id="adminTotalTeachers">0</span></div>
                            <div class="stat-card"><h4>Total Students</h4><span id="adminTotalStudents">0</span></div>
                            <div class="stat-card"><h4>Total Appointments</h4><span id="adminTotalAppointments">0</span></div>
                        </div>
                        <div id="adminUserManagement">
                            <h3>Teacher Management</h3>
                            <div id="adminTeachersTable"></div>
                            <h3>Student Management</h3>
                            <div id="adminStudentsTable"></div>
                        </div>
                        <div id="adminAppointments">
                            <h3>All Appointments</h3>
                            <div id="adminAllAppointmentsTable"></div>
                        </div>
                        <div id="adminLogs">
                            <h3>System Logs</h3>
                            <div id="adminLogsTable"></div>
                        </div>
                    </div>
                    <!-- Teacher Dashboard -->
                    <div id="teacherDashboard" class="dashboard-content" style="display:none;">
                        <h2>Teacher Dashboard</h2>
                        <div class="stats-grid">
                            <div class="stat-card"><h4>Pending Requests</h4><span id="teacherPendingRequests">0</span></div>
                            <div class="stat-card"><h4>Approved Appointments</h4><span id="teacherApprovedAppointments">0</span></div>
                        </div>
                        <div id="teacherSchedule">
                            <h3>Schedule</h3>
                            <div id="teacherScheduleTable"></div>
                        </div>
                        <div id="teacherAppointments">
                            <h3>Appointments</h3>
                            <div id="teacherAppointmentsTable"></div>
                        </div>
                        <div id="teacherMessages">
                            <h3>Messages</h3>
                            <div id="teacherMessagesTable"></div>
                        </div>
                    </div>
                    <!-- Student Dashboard -->
                    <div id="studentDashboard" class="dashboard-content" style="display:none;">
                        <h2>Student Dashboard</h2>
                        <div class="stats-grid">
                            <div class="stat-card"><h4>Upcoming Appointments</h4><span id="studentUpcomingAppointments">0</span></div>
                            <div class="stat-card"><h4>Past Appointments</h4><span id="studentPastAppointments">0</span></div>
                        </div>
                        <div id="studentBookAppointment">
                            <h3>Book Appointment</h3>
                            <div id="studentBookAppointmentForm"></div>
                        </div>
                        <div id="studentAppointments">
                            <h3>Appointments</h3>
                            <div id="studentAppointmentsTable"></div>
                        </div>
                        <div id="studentMessages">
                            <h3>Messages</h3>
                            <div id="studentMessagesTable"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="about" class="about">
                <div class="about-content">
                    <h2>About Our System</h2>
                    <p>Our Student-Teacher Booking Appointment system is designed to facilitate seamless communication between students and faculty members. Book appointments, send messages, and manage schedules efficiently.</p>
                    <div class="features-grid">
                        <div class="feature-card">
                            <i class="fas fa-calendar-check"></i>
                            <h3>Easy Scheduling</h3>
                            <p>Book appointments with your preferred teachers effortlessly</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-comments"></i>
                            <h3>Messaging System</h3>
                            <p>Send messages and communicate appointment details</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-users"></i>
                            <h3>User Management</h3>
                            <p>Comprehensive admin panel for managing users and appointments</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="loginEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="loginPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
                <p class="register-link">
                    Don't have an account? <a href="#" onclick="showRegisterModal()">Register here</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeRegisterModal()">&times;</span>
            <h2>Register</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regName">Full Name:</label>
                    <input type="text" id="regName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="regEmail">Email:</label>
                    <input type="email" id="regEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="regPassword">Password:</label>
                    <input type="password" id="regPassword" name="password" required>
                </div>
                <div class="form-group">
                    <label for="userType">User Type:</label>
                    <select id="userType" name="userType" required>
                        <option value="">Select Type</option>
                        <option value="student">Student</option>
                        <option value="teacher">Teacher</option>
                    </select>
                </div>
                <div id="teacherFields" class="teacher-fields" style="display: none;">
                    <div class="form-group">
                        <label for="department">Department:</label>
                        <input type="text" id="department" name="department">
                    </div>
                    <div class="form-group">
                        <label for="subject">Subject:</label>
                        <input type="text" id="subject" name="subject">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Register</button>
                <p class="login-link">
                    Already have an account? <a href="#" onclick="showLoginModalFromRegister()">Login here</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/ui-enhancements.js"></script>
    
    <script>
        // Simple, direct modal functionality
        let currentUserType = 'student';

        // Modal functions
        function showModal(modalId) {
            console.log('Showing modal:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                modal.style.opacity = '1';
                modal.style.visibility = 'visible';
                document.body.style.overflow = 'hidden';
            } else {
                console.error('Modal not found:', modalId);
            }
        }

        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                modal.style.opacity = '0';
                modal.style.visibility = 'hidden';
                document.body.style.overflow = 'auto';
            }
        }

        function showLoginModal(userType = 'student') {
            console.log('Showing login modal for:', userType);
            currentUserType = userType;
            const modalTitle = document.getElementById('modalTitle');
            if (modalTitle) {
                modalTitle.textContent = userType.charAt(0).toUpperCase() + userType.slice(1) + ' Login';
            }
            showModal('loginModal');
        }

        function showRegisterModal() {
            console.log('Showing register modal');
            hideModal('loginModal');
            showModal('registerModal');
        }

        function showLoginModalFromRegister() {
            console.log('Showing login modal from register');
            hideModal('registerModal');
            showModal('loginModal');
        }

        function closeModal() {
            hideModal('loginModal');
            hideModal('registerModal');
        }

        // Authentication functions
        function handleLogin(email, password) {
            console.log('Handling login:', email);
            
            // Demo credentials
            const credentials = {
                'student@edubook.com': { password: 'student123', type: 'student' },
                'teacher@edubook.com': { password: 'teacher123', type: 'teacher' },
                'admin@edubook.com': { password: 'admin123', type: 'admin' }
            };

            const cred = credentials[email];
            if (cred && cred.password === password) {
                // Store user session
                sessionStorage.setItem('currentUser', JSON.stringify({
                    email: email,
                    type: cred.type,
                    name: email.split('@')[0],
                    authenticated: true
                }));

                closeModal();
                showNotification('Login successful! Redirecting...', 'success');
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = `dashboards/${cred.type}-dashboard.html`;
                }, 1000);
                
                return true;
            } else {
                showNotification('Invalid email or password', 'error');
                return false;
            }
        }

        function handleRegistration(formData) {
            console.log('Handling registration:', formData);
            
            // Simulate registration process
            const newUser = {
                name: formData.name,
                email: formData.email,
                type: formData.userType,
                department: formData.department || '',
                subject: formData.subject || '',
                authenticated: true
            };

            // Store user session
            sessionStorage.setItem('currentUser', JSON.stringify(newUser));
            
            closeModal();
            showNotification('Registration successful! Welcome to EduBook!', 'success');
            
            // Redirect to dashboard
            setTimeout(() => {
                window.location.href = `dashboards/${newUser.type}-dashboard.html`;
            }, 1000);
        }

        // Test login function
        function testLogin(userType) {
            console.log('Test login for:', userType);
            const credentials = {
                student: { email: 'student@edubook.com', password: 'student123' },
                teacher: { email: 'teacher@edubook.com', password: 'teacher123' },
                admin: { email: 'admin@edubook.com', password: 'admin123' }
            };

            const cred = credentials[userType];
            if (cred) {
                const emailField = document.getElementById('loginEmail');
                const passwordField = document.getElementById('loginPassword');
                
                if (emailField && passwordField) {
                    emailField.value = cred.email;
                    passwordField.value = cred.password;
                    handleLogin(cred.email, cred.password);
                } else {
                    // Direct login without form
                    handleLogin(cred.email, cred.password);
                }
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            // Remove existing notifications
            const existing = document.querySelector('.notification');
            if (existing) {
                existing.remove();
            }

            // Create notification
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;

            // Style notification
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                max-width: 350px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideInRight 0.3s ease;
            `;

            // Set background color based on type
            const colors = {
                success: '#28a745',
                error: '#dc3545',
                warning: '#ffc107',
                info: '#17a2b8'
            };
            notification.style.backgroundColor = colors[type] || colors.info;

            // Add to page
            document.body.appendChild(notification);

            // Auto remove after 4 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.remove();
                        }
                    }, 300);
                }
            }, 4000);
        }

        // Initialize when DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('EduBook application loading...');

            // Setup portal button listeners
            const studentBtn = document.getElementById('studentLoginBtn');
            const teacherBtn = document.getElementById('teacherLoginBtn');
            const adminBtn = document.getElementById('adminLoginBtn');

            if (studentBtn) {
                studentBtn.addEventListener('click', function() {
                    console.log('Student portal clicked');
                    showLoginModal('student');
                });
            }

            if (teacherBtn) {
                teacherBtn.addEventListener('click', function() {
                    console.log('Teacher portal clicked');
                    showLoginModal('teacher');
                });
            }

            if (adminBtn) {
                adminBtn.addEventListener('click', function() {
                    console.log('Admin portal clicked');
                    showLoginModal('admin');
                });
            }

            // Setup login form
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = document.getElementById('loginEmail').value;
                    const password = document.getElementById('loginPassword').value;
                    
                    if (email && password) {
                        handleLogin(email, password);
                    } else {
                        showNotification('Please enter both email and password', 'warning');
                    }
                });
            }

            // Setup registration form
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        name: document.getElementById('regName').value,
                        email: document.getElementById('regEmail').value,
                        password: document.getElementById('regPassword').value,
                        userType: document.getElementById('userType').value,
                        department: document.getElementById('department')?.value || '',
                        subject: document.getElementById('subject')?.value || ''
                    };

                    if (formData.name && formData.email && formData.password && formData.userType) {
                        handleRegistration(formData);
                    } else {
                        showNotification('Please fill in all required fields', 'warning');
                    }
                });
            }

            // Setup user type change for registration
            const userTypeSelect = document.getElementById('userType');
            if (userTypeSelect) {
                userTypeSelect.addEventListener('change', function() {
                    const teacherFields = document.getElementById('teacherFields');
                    if (teacherFields) {
                        if (this.value === 'teacher') {
                            teacherFields.style.display = 'block';
                        } else {
                            teacherFields.style.display = 'none';
                        }
                    }
                });
            }

            // Close modal when clicking outside
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    closeModal();
                }
            });

            // Close modal on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });

            console.log('EduBook application loaded successfully!');
            showNotification('Welcome to EduBook! Choose your portal to get started.', 'info');
        });

        // Make functions globally available
        window.showLoginModal = showLoginModal;
        window.showRegisterModal = showRegisterModal;
        window.showLoginModalFromRegister = showLoginModalFromRegister;
        window.closeModal = closeModal;
        window.testLogin = testLogin;
        window.showNotification = showNotification;
    </script>

    <style>
        /* Animation keyframes */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Modal improvements */
        .modal {
            display: none !important;
            position: fixed !important;
            z-index: 5000 !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background-color: rgba(0, 0, 0, 0.7) !important;
            backdrop-filter: blur(5px) !important;
        }

        .modal[style*="display: block"] {
            display: block !important;
        }

        .modal-content {
            background: white !important;
            margin: 5% auto !important;
            padding: 2rem !important;
            border-radius: 12px !important;
            width: 90% !important;
            max-width: 500px !important;
            position: relative !important;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3) !important;
            animation: modalSlideIn 0.3s ease !important;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .close {
            position: absolute !important;
            top: 15px !important;
            right: 20px !important;
            font-size: 24px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            color: #999 !important;
            transition: color 0.3s ease !important;
        }

        .close:hover {
            color: #333 !important;
        }

        .form-group {
            margin-bottom: 1.5rem !important;
        }

        .form-group label {
            display: block !important;
            margin-bottom: 0.5rem !important;
            font-weight: 500 !important;
            color: #333 !important;
        }

        .form-group input,
        .form-group select {
            width: 100% !important;
            padding: 0.75rem !important;
            border: 2px solid #e1e5e9 !important;
            border-radius: 6px !important;
            font-size: 1rem !important;
            transition: border-color 0.3s ease !important;
            box-sizing: border-box !important;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none !important;
            border-color: #007bff !important;
        }

        .teacher-fields {
            display: none !important;
            margin-top: 1rem !important;
            padding-top: 1rem !important;
            border-top: 1px solid #e1e5e9 !important;
        }

        .modal .btn {
            background: #007bff !important;
            color: white !important;
            border: none !important;
            padding: 0.75rem 1.5rem !important;
            border-radius: 6px !important;
            font-size: 1rem !important;
            font-weight: 500 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            width: 100% !important;
        }

        .modal .btn:hover {
            background: #0056b3 !important;
            transform: translateY(-2px) !important;
        }

        .register-link,
        .login-link {
            text-align: center !important;
            margin-top: 1rem !important;
            color: #666 !important;
        }

        .register-link a,
        .login-link a {
            color: #007bff !important;
            text-decoration: none !important;
            font-weight: 500 !important;
        }

        .register-link a:hover,
        .login-link a:hover {
            text-decoration: underline !important;
        }
    </style>
</body>
</html>
